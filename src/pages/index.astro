---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Hero from '../components/Hero.astro';
import Services from '../components/Services.astro';
import About from '../components/About.astro';
import Contact from '../components/Contact.astro';
import Footer from '../components/Footer.astro';

// Load contractor data from JSON file
import data from '../../data.json';

const {
  template = 'classic',
  company_name,
  tagline,
  phone,
  email,
  address,
  services,
  about,
  cta_text,
  hero_image_url,
  about_image_url
} = data;

// Generate meta description from about text
const metaDescription = about.substring(0, 160) + (about.length > 160 ? '...' : '');
---

<Layout title={company_name} description={metaDescription} template={template}>
  <Header companyName={company_name} phone={phone} template={template} />
  <main>
    <Hero
      companyName={company_name}
      tagline={tagline}
      ctaText={cta_text}
      phone={phone}
      template={template}
      heroImageUrl={hero_image_url}
    />
    <Services services={services} template={template} />
    <About
      about={about}
      companyName={company_name}
      template={template}
      aboutImageUrl={about_image_url}
    />
    <Contact
      phone={phone}
      email={email}
      address={address}
      ctaText={cta_text}
      template={template}
    />
  </main>
  <Footer companyName={company_name} template={template} />
</Layout>
